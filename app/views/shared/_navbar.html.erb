<nav class="navbar navbar-light bg-white shadow-sm border-bottom">
  <div class="container-fluid px-3">
    <!-- Left: Menu Button -->
    <div class="dropdown">
      <button class="btn btn-primary rounded-circle d-flex align-items-center justify-content-center p-0 shadow-sm"
              style="width: 50px; height: 50px; background: linear-gradient(90deg, rgba(43,127,255,1) 0%, rgba(152,16,250,1) 100%); border: none;"
              type="button"
              id="navbarMenuDropdown"
              data-bs-toggle="dropdown"
              aria-expanded="false">
        <i class="bi bi-list text-white fs-3"></i>
      </button>
      <ul class="dropdown-menu shadow-lg" aria-labelledby="navbarMenuDropdown" style="min-width: 220px;">
        <li>
          <%= link_to families_path, class: "dropdown-item py-2 #{'active bg-primary text-white' if current_page?(families_path)}" do %>
            <i class="bi bi-people-fill me-2" style="color: <%= current_page?(families_path) ? 'white' : '#2b7fff' %>;"></i>Familles
          <% end %>
        </li>
        <li>
          <%= link_to calendar_path, class: "dropdown-item py-2 #{'active bg-primary text-white' if current_page?(calendar_path)}" do %>
            <i class="bi bi-calendar-event me-2" style="color: <%= current_page?(calendar_path) ? 'white' : '#00c950' %>;"></i>Calendrier
          <% end %>
        </li>
        <li>
          <%= link_to vaccines_path, class: "dropdown-item py-2 #{'active bg-primary text-white' if current_page?(vaccines_path)}" do %>
            <i class="bi bi-shield-fill-plus me-2" style="color: <%= current_page?(vaccines_path) ? 'white' : '#dc3545' %>;"></i>Vaccins
          <% end %>
        </li>
        <li>
          <%= link_to ai_assistant_path, class: "dropdown-item py-2 #{'active bg-primary text-white' if current_page?(ai_assistant_path)}" do %>
            <i class="bi bi-stars me-2" style="color: <%= current_page?(ai_assistant_path) ? 'white' : '#ffc107' %>;"></i>Assistant IA
          <% end %>
        </li>

        <% if user_signed_in? %>
          <li><hr class="dropdown-divider"></li>
          <li>
            <%= link_to edit_user_registration_path, class: "dropdown-item py-2" do %>
              <i class="bi bi-person-fill me-2 text-secondary"></i>Mon profil
            <% end %>
          </li>
          <li>
            <%= button_to destroy_user_session_path, method: :delete, class: "dropdown-item py-2 text-danger" do %>
              <i class="bi bi-box-arrow-right me-2"></i>Se d√©connecter
            <% end %>
          </li>
        <% else %>
          <li><hr class="dropdown-divider"></li>
          <li>
            <%= link_to new_user_session_path, class: "dropdown-item py-2" do %>
              <i class="bi bi-box-arrow-in-right me-2"></i>Se connecter
            <% end %>
          </li>
          <li>
            <%= link_to new_user_registration_path, class: "dropdown-item py-2 text-primary" do %>
              <i class="bi bi-person-plus-fill me-2"></i>S'inscrire
            <% end %>
          </li>
        <% end %>
      </ul>
    </div>

    <!-- Center: Logo -->
    <%= link_to root_path, class: "navbar-brand position-absolute start-50 translate-middle-x fw-bold m-0" do %>
      <span style="background: linear-gradient(90deg, rgba(43,127,255,1) 0%, rgba(152,16,250,1) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-size: 1.5rem;">
        FamilyTasks
      </span>
    <% end %>

    <!-- Right: User Info (Desktop only) -->
    <% if user_signed_in? %>
      <div class="d-none d-md-flex align-items-center">
        <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center" style="width: 40px; height: 40px; font-size: 16px; font-weight: bold;">
          <%= current_user.email[0].upcase %>
        </div>
        <span class="ms-2 text-muted small d-none d-lg-inline"><%= current_user.email %></span>
      </div>
    <% else %>
      <div class="d-none d-md-block">
        <%= link_to "Se connecter", new_user_session_path, class: "btn btn-sm btn-outline-primary me-2" %>
        <%= link_to "S'inscrire", new_user_registration_path, class: "btn btn-sm btn-primary rounded-pill px-3" %>
      </div>
    <% end %>
  </div>
</nav>
