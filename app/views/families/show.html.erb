<div class="bg-white w-full min-h-screen relative">
  <div class="flex flex-col min-h-screen items-start pt-[76px] pb-0 px-0 bg-gray-50">
    <div class="flex flex-col items-start gap-6 pt-6 pb-12 px-4 sm:px-6 md:px-8 lg:px-12 relative w-full bg-gray-50 max-w-7xl mx-auto">
      <!-- Family Header Section -->
      <div class="gap-8 md:gap-12 bg-white border border-solid border-[#0000001a] flex flex-col items-start p-6 relative self-stretch w-full rounded-[14px]">
        <div class="flex w-full items-start justify-between relative flex-wrap gap-4">
          <div class="flex flex-col items-start gap-2 relative">
            <div class="[font-family:'Inter',Helvetica] font-medium text-neutral-950 text-xl md:text-2xl tracking-[0.07px] leading-9">
              <%= @family.name %>
            </div>
            <p class="[font-family:'Inter',Helvetica] font-normal text-[#495565] text-sm md:text-base tracking-[-0.31px] leading-6">
              Code postal : <%= @family.zipcode %>
            </p>
          </div>
          <%= link_to edit_family_path(@family), class: "all-[unset] box-border flex items-center gap-2 px-4 py-2 h-8 bg-white rounded-lg border border-solid border-[#0000001a] cursor-pointer" do %>
            <%= image_tag("https://c.animaapp.com/mhxfchwloC97ck/img/icon-16.svg", class: "w-4 h-4", alt: "Edit icon") %>
            <div class="[font-family:'Inter',Helvetica] font-medium text-neutral-950 text-sm tracking-[-0.15px] leading-5">
              Modifier
            </div>
          <% end %>
        </div>

        <!-- Family Stats -->
        <div class="relative w-full border-t [border-top-style:solid] border-[#0000001a] pt-6">
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 w-full">
            <div class="flex flex-col items-start gap-1">
              <div class="[font-family:'Inter',Helvetica] font-normal text-[#495565] text-sm tracking-[-0.15px] leading-5">
                Membres
              </div>
              <div class="[font-family:'Inter',Helvetica] font-normal text-neutral-950 text-2xl tracking-[0.07px] leading-8">
                <%= @family.members.count %>
              </div>
            </div>
            <div class="flex flex-col items-start gap-1">
              <div class="[font-family:'Inter',Helvetica] font-normal text-[#495565] text-sm tracking-[-0.15px] leading-5">
                Créée le
              </div>
              <div class="[font-family:'Inter',Helvetica] font-normal text-neutral-950 text-base tracking-[-0.31px] leading-6">
                <%= @family.created_at.strftime("%d/%m/%Y") %>
              </div>
            </div>
            <div class="flex flex-col items-start gap-1">
              <div class="[font-family:'Inter',Helvetica] font-normal text-[#495565] text-sm tracking-[-0.15px] leading-5">
                Code postal
              </div>
              <div class="[font-family:'Inter',Helvetica] font-normal text-neutral-950 text-base tracking-[-0.31px] leading-6">
                <%= @family.zipcode %>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Main Grid Section -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 w-full">
        <!-- Left Column: Calendar & Quick Actions -->
        <div class="flex flex-col items-start gap-6 lg:col-span-1">
          <!-- Calendar Card -->
          <div class="gap-6 md:gap-10 bg-white border border-solid border-[#0000001a] flex flex-col items-start p-6 relative self-stretch w-full rounded-[14px]">
            <div class="relative w-full">
              <div class="[font-family:'Inter',Helvetica] font-normal text-base tracking-[-0.31px] leading-6 absolute [font-family:'Inter',Helvetica] text-neutral-950 whitespace-nowrap">
                Calendrier
              </div>
            </div>
            <div class="flex flex-col w-full items-start relative flex-1 grow rounded-lg border border-solid border-[#0000001a] p-4 bg-gray-50">
              <div class="text-center text-[#495565] text-sm">
                Calendrier placeholder
              </div>
            </div>
            <div class="flex flex-col w-full h-[177px] items-start gap-2 pt-[17px] pb-0 px-0 relative border-t [border-top-style:solid] border-[#0000001a]">
              <div class="relative self-stretch w-full h-5">
                <div class="[font-family:'Inter',Helvetica] font-normal text-[#495565] text-sm tracking-[-0.15px] leading-5 whitespace-nowrap">
                  Événements à venir
                </div>
              </div>
              <div class="flex flex-col h-full items-start gap-2 relative self-stretch w-full">
                <div class="flex flex-col items-start pt-[13px] pb-px px-[13px] relative self-stretch w-full bg-purple-50 rounded-[10px] border border-solid border-[#e9d4ff] p-3">
                  <div class="[font-family:'Inter',Helvetica] font-normal text-[#59168b] text-sm tracking-[-0.15px] leading-5 whitespace-nowrap">
                    Événements familials
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Quick Actions Card -->
          <div class="gap-6 md:gap-10 bg-white border border-solid border-[#0000001a] flex flex-col items-start p-6 relative self-stretch w-full rounded-[14px]">
            <div class="relative w-full">
              <div class="[font-family:'Inter',Helvetica] font-normal text-neutral-950 text-base tracking-[-0.31px] leading-6">
                Actions rapides
              </div>
            </div>
            <div class="flex flex-col w-full items-start gap-3 relative">
              <%= link_to calendar_path, class: "all-[unset] box-border relative self-stretch w-full h-[68px] rounded-lg [background:linear-gradient(135deg,rgba(173,70,255,1)_0%,rgba(152,16,250,1)_100%)] cursor-pointer flex items-center gap-3 p-4" do %>
                <%= image_tag("https://c.animaapp.com/mhxfchwloC97ck/img/icon-23.svg", class: "w-4 h-4", alt: "Calendar icon") %>
                <div class="flex flex-col items-start">
                  <div class="[font-family:'Inter',Helvetica] font-medium text-white text-sm tracking-[-0.15px] leading-5">
                    Calendrier vacances
                  </div>
                  <div class="[font-family:'Inter',Helvetica] font-medium text-[#f2e7fe] text-xs tracking-[0] leading-4">
                    Zone A - Paris
                  </div>
                </div>
              <% end %>
              <%= link_to vaccines_path, class: "all-[unset] box-border relative self-stretch w-full h-[68px] rounded-lg [background:linear-gradient(135deg,rgba(0,201,80,1)_0%,rgba(0,166,62,1)_100%)] cursor-pointer flex items-center gap-3 p-4" do %>
                <%= image_tag("https://c.animaapp.com/mhxfchwloC97ck/img/icon-4.svg", class: "w-4 h-4", alt: "Vaccine icon") %>
                <div class="flex flex-col items-start">
                  <div class="[font-family:'Inter',Helvetica] font-medium text-white text-sm tracking-[-0.15px] leading-5">
                    Rappels vaccins
                  </div>
                  <div class="[font-family:'Inter',Helvetica] font-medium text-[#dbfbe6] text-xs tracking-[0] leading-4">
                    <%= @family.members.count %> membres
                  </div>
                </div>
              <% end %>
            </div>
          </div>
        </div>

        <!-- Right Column: Members & AI Assistant -->
        <div class="flex flex-col items-start gap-6 lg:col-span-2">
          <!-- Members Section -->
          <div class="gap-8 md:gap-12 bg-white border border-solid border-[#0000001a] flex flex-col items-start p-6 relative self-stretch w-full rounded-[14px]">
            <div class="flex w-full items-center justify-between relative flex-wrap gap-4">
              <div class="[font-family:'Inter',Helvetica] font-normal text-neutral-950 text-base tracking-[-0.31px] leading-6">
                Membres de la famille
              </div>
              <%= link_to new_family_member_path(@family), class: "all-[unset] box-border flex items-center gap-2 px-4 py-2 h-9 bg-[#030213] rounded-lg cursor-pointer" do %>
                <%= image_tag("https://c.animaapp.com/mhxfchwloC97ck/img/icon-8.svg", class: "w-4 h-4", alt: "Add icon") %>
                <div class="[font-family:'Inter',Helvetica] font-medium text-white text-sm tracking-[-0.15px] leading-5">
                  Ajouter un membre
                </div>
              <% end %>
            </div>
            <div class="flex flex-col w-full items-start gap-4 relative">
              <% @family.members.each do |member| %>
                <div class="flex items-center gap-4 p-4 w-full bg-gray-50 rounded-[10px]">
                  <div class="flex-1">
                    <div class="[font-family:'Inter',Helvetica] font-medium text-neutral-950 text-base">
                      <%= member.name %>
                    </div>
                    <div class="[font-family:'Inter',Helvetica] font-normal text-[#495565] text-sm">
                      <%= member.birthday ? "#{calculate_age(member.birthday)} ans" : "Membre" %>
                    </div>
                  </div>
                </div>
              <% end %>
            </div>
            <div class="relative w-full border-t [border-top-style:solid] border-[#0000001a] pt-6">
              <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 w-full">
                <div class="flex flex-col items-start gap-1 p-4 bg-blue-50 rounded-[10px]">
                  <div class="[font-family:'Inter',Helvetica] font-normal text-neutral-950 text-2xl text-center tracking-[0.07px] leading-8 w-full">
                    <%= @family.members.where(type: 'adult').count rescue 0 %>
                  </div>
                  <div class="[font-family:'Inter',Helvetica] font-normal text-[#495565] text-sm text-center tracking-[-0.15px] leading-5 w-full">
                    Adultes
                  </div>
                </div>
                <div class="flex flex-col items-start gap-1 p-4 bg-green-50 rounded-[10px]">
                  <div class="[font-family:'Inter',Helvetica] font-normal text-neutral-950 text-2xl text-center tracking-[0.07px] leading-8 w-full">
                    <%= @family.members.where(type: 'child').count rescue 0 %>
                  </div>
                  <div class="[font-family:'Inter',Helvetica] font-normal text-[#495565] text-sm text-center tracking-[-0.15px] leading-5 w-full">
                    Enfant
                  </div>
                </div>
                <div class="flex flex-col items-start gap-1 p-4 bg-purple-50 rounded-[10px]">
                  <div class="[font-family:'Inter',Helvetica] font-normal text-neutral-950 text-2xl text-center tracking-[0.07px] leading-8 w-full">
                    <%= @family.members.where(schooled: true).count rescue 0 %>
                  </div>
                  <div class="[font-family:'Inter',Helvetica] font-normal text-[#495565] text-sm text-center tracking-[-0.15px] leading-5 w-full">
                    Scolarisé
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- AI Assistant Section -->
          <div class="gap-6 md:gap-10 border-2 border-solid border-[#e9d4ff] [background:linear-gradient(135deg,rgba(250,245,255,1)_0%,rgba(239,246,255,1)_100%)] flex flex-col items-start p-6 relative self-stretch w-full rounded-[14px] min-h-[300px]">
            <div class="flex flex-col w-full items-start gap-2 relative">
              <div class="relative self-stretch w-full h-6">
                <%= image_tag("https://c.animaapp.com/mhxfchwloC97ck/img/icon-9.svg", class: "absolute top-0 left-0 w-6 h-6", alt: "AI icon") %>
                <div class="absolute top-0 left-8 font-normal text-neutral-950 text-base tracking-[-0.31px] leading-6 [font-family:'Inter',Helvetica] whitespace-nowrap">
                  Assistant IA Familial
                </div>
              </div>
              <div class="h-5 relative self-stretch w-full">
                <p class="[font-family:'Inter',Helvetica] font-normal text-[#495565] text-sm tracking-[-0.15px] leading-5 whitespace-nowrap">
                  Posez vos questions sur les vacances, vaccins, activités familiales...
                </p>
              </div>
            </div>
            <div class="flex flex-col w-full items-start pt-[17px] pb-px px-[17px] relative bg-white rounded-[10px] overflow-hidden border border-solid border-[#e9d4ff] min-h-[150px] justify-center">
              <div class="flex items-start gap-3 relative self-stretch w-full">
                <div class="w-8 h-8 flex-shrink-0 rounded-full bg-gradient-to-br from-purple-400 to-purple-600"></div>
                <div class="flex flex-col items-start p-4 relative flex-1 bg-purple-50 rounded-[10px] border border-solid border-[#e9d4ff]">
                  <p class="[font-family:'Inter',Helvetica] font-normal text-[#354152] text-sm tracking-[-0.15px] leading-5">
                    Bonjour ! Je suis votre assistant familial. Je peux vous aider à planifier vos vacances, gérer les rappels de vaccins, suggérer des activités, et répondre à toutes vos questions familiales.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
